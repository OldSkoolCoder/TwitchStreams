; 10 SYS (2064)

*=$0801

        BYTE    $0E, $08, $0A, $00, $9E, $20, $28,  $32, $30, $36, $34, $29, $00, $00, $00

* = $0810

SCREENRAM = $0400
COLOURRAM = $D800

SOURCEBYTE = $F0
SOURCELENGTH = $F2
DESTINATION = $F4

        ldx #>SCREENRAM
        ldy #<SCREENDATA
        lda #>SCREENDATA
        jsr DecodeScreen

        ldx #>COLOURRAM
        ldy #<COLOURDATA
        lda #>COLOURDATA
        jsr DecodeScreen

        jmp *


DecodeScreen
; Acc = Hi Location Of Screen Data
; Y = Lo Location Of Screen Data
; X = Hi Screen Location ($04 or $D8)

        ; Initialise Source Reader
        sty SOURCEBYTE
        sta SOURCEBYTE + 1

        ; Lenght is after Source
        ; increase Y by one for start of length
        iny 
        sty SOURCELENGTH
        ; Does this cross page boundary
        bne @ByPass
        ; Yes, add 1 to Acc
        clc
        adc #1
@ByPass
        sta SOURCELENGTH + 1

        ; Initialise Destination Writer
        stx DESTINATION + 1
        ldx #0
        stx DESTINATION

DecodeLooper
        ldy #0
        lda (SOURCELENGTH),y
        beq ExitDecoder
        tax

        lda (SOURCEBYTE),y

CharacterLooper
        sta (DESTINATION),y

        inc DESTINATION
        bne @ByPassInc
        inc DESTINATION + 1

@ByPassInc
        dex
        bne CharacterLooper

        clc
        lda SOURCEBYTE
        adc #2
        sta SOURCEBYTE
        bcc @ByPassIncSB
        inc SOURCEBYTE + 1

@ByPassIncSB
        clc
        lda SOURCELENGTH
        adc #2
        sta SOURCELENGTH
        bcc @ByPassIncSL
        inc SOURCELENGTH + 1

@ByPassIncSL
        jmp DecodeLooper

ExitDecoder
        rts




SCREENDATA
        BYTE    $20,$4D,$58,$02,$20,$26,$58,$02,$20,$16,$46,$01,$20,$0F,$58,$02,$20,$15,$4E,$01,$58,$01,$44,$01,$47,$02,$20,$0C,$58,$02,$20,$15,$4F,$01,$58,$04,$48,$01,$20,$0B,$58,$02,$20,$14,$50,$01,$58,$05,$4A,$01,$20,$0B,$58,$02,$20,$01,$47,$02,$20,$0F,$52,$01,$51,$01,$58,$07,$48,$01,$20,$0A,$58,$02,$20,$01,$58,$02,$42,$01,$43,$01,$20,$0D,$4D,$01,$58,$08,$4A,$01,$20,$0A,$58,$02,$20,$01,$58,$04,$44,$01,$20,$0D,$4D,$01,$58,$07,$49,$01,$20,$0A,$58,$02,$20,$01,$58,$05,$48,$01,$20,$0C,$4E,$01,$58,$07,$4B,$01,$20,$0A,$58,$02,$20,$01,$58,$05,$4A,$01,$20,$09,$4C,$03,$4F,$01,$58,$07,$48,$01,$20,$0A,$58,$02,$20,$01,$58,$06,$48,$01,$20,$07,$4E,$01,$57,$03,$58,$08,$4A,$01,$20,$0A,$58,$02,$20,$01,$58,$06,$4A,$01,$20,$07,$4F,$01,$58,$0C,$48,$01,$20,$0C,$58,$06,$49,$01,$20,$06,$4E,$01,$58,$0D,$4A,$01,$20,$0C,$58,$06,$4B,$01,$20,$06,$4F,$01,$58,$0D,$45,$01,$20,$0C,$58,$05,$45,$01,$20,$06,$50,$01,$58,$0D,$45,$01,$20,$0D,$58,$03,$40,$01,$41,$01,$20,$05,$52,$01,$51,$01,$58,$0E,$48,$01,$20,$0D,$58,$02,$45,$01,$20,$06,$50,$01,$58,$10,$4A,$01,$20,$0D,$58,$01,$45,$01,$20,$06,$50,$01,$58,$12,$44,$01,$20,$0C,$58,$01,$44,$01,$20,$06,$53,$01,$58,$13,$42,$01,$43,$01,$4C,$04,$50,$01,$42,$01,$43,$01,$20,$03,$58,$02,$44,$01,$20,$05,$54,$01,$58,$15,$57,$04,$58,$03,$42,$01,$43,$01,$20,$01,$58,$03,$44,$01,$20,$04,$55,$01,$58,$1E,$44,$01,$58,$04,$44,$01,$4C,$03,$56,$01,$58,$02,$20,$10,$58,$12,$57,$03,$58,$03,$20,$01,$13,$01,$03,$01,$0F,$01,$12,$01,$05,$01,$20,$01,$3A,$01,$20,$01,$30,$06,$20,$01,$58,$09,$0F,$01,$13,$01,$0B,$01,$58,$01,$00,$00
COLOURDATA
        BYTE    $00,$4D,$01,$02,$00,$08,$03,$01,$00,$1D,$01,$02,$00,$16,$01,$01,$00,$0F,$01,$02,$00,$15,$01,$05,$00,$0C,$01,$02,$00,$15,$01,$06,$00,$0B,$01,$02,$00,$14,$01,$07,$00,$0B,$01,$02,$00,$01,$01,$02,$00,$0F,$01,$0A,$00,$0A,$01,$02,$00,$01,$01,$04,$00,$0D,$01,$0A,$00,$0A,$01,$02,$00,$01,$01,$05,$00,$0D,$01,$09,$00,$0A,$01,$02,$00,$01,$01,$06,$00,$0C,$01,$09,$00,$0A,$01,$02,$00,$01,$01,$06,$00,$09,$02,$03,$01,$09,$00,$0A,$01,$02,$00,$01,$01,$07,$00,$07,$01,$01,$02,$03,$01,$09,$00,$0A,$01,$02,$00,$01,$01,$07,$00,$07,$01,$0E,$00,$0C,$01,$07,$00,$06,$01,$0F,$00,$0C,$01,$07,$00,$06,$01,$0F,$00,$0C,$01,$06,$00,$06,$01,$0F,$00,$0D,$01,$05,$00,$03,$01,$13,$00,$0D,$01,$03,$00,$05,$01,$13,$00,$0D,$01,$02,$00,$06,$01,$14,$00,$0C,$01,$02,$00,$06,$01,$16,$02,$04,$01,$03,$00,$03,$01,$03,$00,$05,$01,$16,$02,$04,$01,$05,$00,$01,$01,$04,$00,$04,$01,$25,$02,$03,$01,$04,$00,$0F,$01,$12,$02,$03,$01,$09,$00,$01,$01,$01,$00,$01,$01,$06,$00,$01,$01,$09,$04,$03,$01,$01,$00,$00
